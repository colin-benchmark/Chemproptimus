#include "nvm_cache.h"
#include "nvm_struct.h"
#include "status.h"
#include "string.h"
#include <stdint.h>

/**********************************************************
 * Autogenerated code. Don't edit as it'll be overwritten
 *********************************************************/

/* Components which have persistent entries */
#include "device/device_instance.h"
#include "device/device_attributes.h"
#include "firing/firing_instance.h"
#include "firing/firing_attributes.h"

extern device_attributes device_inst;
extern firing_attributes firing_inst;

status_t nvm_instance_to_cache(nvm_cache_t *cache){
    cache->device__bootcounter = device_inst.bootcounter;
    memcpy(cache->firing__inductor_charge_time, firing_inst.inductor_charge_time, sizeof(uint16_t) * FIRING_ATTRIBUTE_INDUCTOR_CHARGE_TIME_ROWS);
    cache->firing__capacitor_charge_time = firing_inst.capacitor_charge_time;
    cache->firing__total_isp = firing_inst.total_isp;

    return STATUS_SUCCESS;
}

status_t nvm_cache_to_instance(nvm_cache_t *cache){
    device_inst.bootcounter = cache->device__bootcounter;
    memcpy(firing_inst.inductor_charge_time, cache->firing__inductor_charge_time, sizeof(uint16_t) * FIRING_ATTRIBUTE_INDUCTOR_CHARGE_TIME_ROWS);
    firing_inst.capacitor_charge_time = cache->firing__capacitor_charge_time;
    firing_inst.total_isp = cache->firing__total_isp;

    return STATUS_SUCCESS;
}
